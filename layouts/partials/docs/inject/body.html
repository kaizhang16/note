<script>
    // Table of contents
    const tableOfContents = document.getElementById("TableOfContents");
    const tableOfContents1 = tableOfContents.cloneNode(true);
    document.querySelector(".book-toc").appendChild(tableOfContents);
    document.getElementById("toc-control").nextElementSibling.appendChild(tableOfContents1);

    // Table
    document.querySelectorAll("table").forEach(table => {
        table.style.width = "auto";
    });

    // highlight.js
    hljs.initHighlightingOnLoad();

    // Search
    const searchResults = document.getElementById("book-search-results");
    document.getElementById("book-search-input").addEventListener("keyup", event => {
        // Navigate to the first searchResults when press "Enter"
        // 13 is "Enter" key
        if (event.keyCode === 13) {
            event.preventDefault();
            if (searchResults.childNodes.length > 0) {
                const searchResult = searchResults.childNodes[0].childNodes[0];
                window.location.href = searchResult.href;
            }
        }
    });

    // MathJax configuration
    MathJax = {
        tex: {
            macros: {
                transformation: ["{\\mathcal{#1}}", 1],
                bm: ["{\\boldsymbol{#1}}", 1],
                vec: ["{\\bm{#1}}", 1],
                matrix: ["{\\bm{#1}}", 1],
                transpose: ["{#1}^{\\mathsf{T}}", 1],
                sign: ["\\textrm{sign}"],
                diag: ["\\textrm{diag}"],
            }
        }
    };
</script>

<!-- MathJax -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>